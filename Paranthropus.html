<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paranthropus - Modelo Interactivo</title>
    <style>
        :root {
            --background: transparent;
            --text: #ffffff;
            --accent: #ffa149;
            --node: #ff6b6b;
            --node-hover: #ff4757;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            overflow: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            position: relative;
        }

        /* Modelo y contenedor */
        .model-container {
            position: relative;
            width: 100%;
            height: 80vh; /* Reducido para evitar scroll vertical */
            margin: 0 auto;
            background: transparent;
            border-radius: 50% / 90% 90% 10% 10%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .model-wrapper {
            position: relative;
            width: 95%; /* Aumentado de 90% a 95% */
            height: 95%; /* Aumentado de 90% a 95% */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .model-video {
            width: auto;
            height: 100%;
            max-width: 100%;
            object-fit: cover;
            border-radius: 50% / 90% 90% 10% 10%;
            box-shadow: none;
        }

        .node.hidden {
            display: none;
        }

        /* Nodos interactivos */
        .node {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--node);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #fff;
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.3);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: #fff;
        }

        .node.visited {
            background: #4CAF50; /* Verde para visitados */
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.3);
        }

        .node.visited::before {
            background: radial-gradient(circle, rgba(76,175,80,0.2) 0%, transparent 70%);
        }

        .node::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,107,107,0.2) 0%, transparent 70%);
            animation: pulse 2s infinite;
        }

        .node:hover {
            transform: scale(1.2);
            background: var(--node-hover);
        }

        .node.visited:hover {
            background: #45a049;
        }

        .node.unvisited {
            background: #ccc; /* Gray for unvisited nodes */
        }

        /* Info panel */
        .info-panel {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 10px;
            max-width: 300px;
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s ease;
            border: 1px solid var(--accent);
            z-index: 20;
        }

        .info-panel.visible {
            visibility: visible;
            opacity: 1;
        }

        .info-title {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .info-text {
            font-size: 0.95rem;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Animaciones */
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
            70% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }

        /* Título y navegación */
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .title {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
            text-shadow: 0 0 20px rgba(255, 161, 73, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 0.8rem 1.5rem;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--accent);
            color: var(--text);
            text-decoration: none;
            border-radius: 30px;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: var(--accent);
            color: #000;
        }

        /* Mini timeline para mostrar el recorrido */
        .journey-timeline {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 400px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1rem;
            border: 1px solid var(--accent);
            z-index: 15;
            overflow-x: auto;
        }

        .journey-timeline::-webkit-scrollbar {
            height: 8px;
        }

        .journey-timeline::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .journey-timeline::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }

        .journey-timeline::-webkit-scrollbar-thumb:hover {
            background: #e6933a;
        }

        .journey-title {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .journey-steps {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-width: fit-content;
        }

        .journey-step {
            width: 80px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            position: relative;
            flex: none;
        }

        .journey-step.active {
            background: var(--accent);
        }

        .journey-step::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
        }

        .journey-step.active::after {
            background: var(--accent);
            box-shadow: 0 0 10px rgba(255, 161, 73, 0.5);
        }

        .journey-labels {
            display: flex;
            margin-top: 0.5rem;
            font-size: 0.6rem;
            color: rgba(255, 255, 255, 0.7);
            gap: 0.5rem;
            min-width: fit-content;
        }

        .journey-label {
            text-align: center;
            width: 80px;
            flex: none;
        }

        .journey-label.active {
            color: var(--accent);
            font-weight: bold;
        }

        /* Panel de progreso del tour */
        .tour-progress {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1rem;
            border: 1px solid var(--accent);
            z-index: 15;
        }

        .tour-title {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .tour-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tour-step {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            position: relative;
        }

        .tour-step.completed {
            background: #4CAF50;
        }

        .tour-step.next {
            background: var(--accent);
        }

        .tour-step::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
        }

        .tour-step.completed::after {
            background: #4CAF50;
        }

        .tour-step.next::after {
            background: var(--accent);
            box-shadow: 0 0 10px rgba(255, 161, 73, 0.5);
        }

        .tour-instruction {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin-top: 0.5rem;
        }

        /* Notificaciones personalizadas */
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 1rem 2rem;
            border-radius: 10px;
            border: 1px solid var(--accent);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            visibility: visible;
        }

        .notification.success {
            border-color: #4CAF50;
        }

        .notification.info {
            border-color: var(--accent);
        }

        /* Background video */
        .background-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }

        /* Mensaje lateral izquierdo */
        .mobile-app-message {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            width: 250px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1rem;
            border: 1px solid var(--accent);
            z-index: 15;
            text-align: center;
        }

        .mobile-app-title {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .mobile-app-text {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.4;
        }

        /* Logo styles */
        .logo-link {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .logo-link:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.05);
        }

        .logo-image {
            height: 30px;
            width: auto;
        }

        .logo-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent);
        }
    </style>
</head>
<body>
    <video class="background-video" autoplay muted loop playsinline>
        <source src="https://i.imgur.com/1IISPsS.mp4" type="video/mp4">
    </video>
    <div class="video-overlay"></div>

    <!-- Logo in top-left corner -->
    <a href="index.html" class="logo-link" title="Ir a la página principal">
        <img src="https://i.imgur.com/zdK1P5m.png" alt="Genus Logo" class="logo-image">
        <span class="logo-text">Genus</span>
    </a>

    <a href="Humanos.html" class="back-button" style="top: 80px;">← Volver a la línea temporal</a>

    <!-- Mini timeline del recorrido -->
    <div class="journey-timeline">
        <div class="journey-title">Tu Recorrido</div>
        <div class="journey-steps">
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step"></div>
            <div class="journey-step active"></div>
        </div>
        <div class="journey-labels">
            <div class="journey-label">Sahelanthropus</div>
            <div class="journey-label">Ardipithecus</div>
            <div class="journey-label">Australopithecus</div>
            <div class="journey-label">Kenyanthropus</div>
            <div class="journey-label">Paranthropus</div>
            <div class="journey-label">Australopithecus africanus</div>
            <div class="journey-label">Paranthropus boisei</div>
            <div class="journey-label">Homo habilis</div>
            <div class="journey-label">Homo erectus</div>
            <div class="journey-label">Homo heidelbergensis</div>
            <div class="journey-label">Homo neanderthalensis</div>
            <div class="journey-label active">Homo sapiens</div>
        </div>
    </div>

    <!-- Panel de progreso del tour -->
    <div class="tour-progress">
        <div class="tour-title">Tour Interactivo</div>
        <div class="tour-steps">
            <div class="tour-step completed" data-step="1"></div>
            <div class="tour-step next" data-step="2"></div>
            <div class="tour-step" data-step="3"></div>
            <div class="tour-step" data-step="4"></div>
            <div class="tour-step" data-step="5"></div>
        </div>
        <div class="tour-instruction">¡Comienza explorando el cráneo!</div>
    </div>

    <!-- Notificación -->
    <div class="notification" id="notification">
        Da clic a los nodos para comenzar el recorrido.
    </div>

    <div class="container">
        <header class="header">
            <h1 class="title">Paranthropus</h1>
            <p class="subtitle">Modelo Interactivo - 2.7-1.2 millones de años</p>
        </header>

        <div class="model-container">
            <div class="model-wrapper">
                <video src="https://i.imgur.com/4fyr6mq.mp4" class="model-video" autoplay muted playsinline>
                    Tu navegador no soporta el elemento video.
                </video>

                <!-- Nodos interactivos -->
                <div class="node hidden" style="top: 28%; left: 45%" data-info="craneo" data-order="1">
                    <div class="info-panel">
                        <h3 class="info-title">Cráneo</h3>
                        <p class="info-text">Cráneo con capacidad craneal de 1200-1600 cc, globoide y alto.</p>
                        <p class="info-status" id="status-1">Estado: No visitado</p>
                    </div>
                </div>

                <div class="node hidden" style="top: 38%; left: 48%" data-info="cara" data-order="2">
                    <div class="info-panel">
                        <h3 class="info-title">Región Facial</h3>
                        <p class="info-text">Cara plana con arcos superciliares reducidos y mentón prominente.</p>
                        <p class="info-status" id="status-2">Estado: No visitado</p>
                    </div>
                </div>

                <div class="node hidden" style="top: 45%; left: 47%" data-info="dientes" data-order="3">
                    <div class="info-panel">
                        <h3 class="info-title">Dentición</h3>
                        <p class="info-text">Dientes pequeños con molares reducidos, dieta omnívora variada.</p>
                        <p class="info-status" id="status-3">Estado: No visitado</p>
                    </div>
                </div>

                <div class="node hidden" style="top: 52%; left: 45%" data-info="foramen" data-order="4">
                    <div class="info-panel">
                        <h3 class="info-title">Foramen Magnum</h3>
                        <p class="info-text">Posición anterior, locomoción bípeda completamente eficiente.</p>
                        <p class="info-status" id="status-4">Estado: No visitado</p>
                    </div>
                </div>

                <div class="node hidden" style="top: 58%; left: 47%" data-info="mandibula" data-order="5">
                    <div class="info-panel">
                        <h3 class="info-title">Mandíbula</h3>
                        <p class="info-text">Mandíbula gracil con mentón pronunciado, dientes pequeños.</p>
                        <p class="info-status" id="status-5">Estado: No visitado</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Función para mostrar notificaciones
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Reset tour progress on page load for fresh start
        localStorage.removeItem('homo-sapiens-tour');
        let visitedNodes = [];
        let currentStep = 1;

        // Actualizar visuales iniciales
        function updateVisuals() {
            nodes.forEach(node => {
                const order = parseInt(node.dataset.order);
                const numberSpan = document.createElement('span');
                numberSpan.textContent = order;
                node.appendChild(numberSpan);

                if (visitedNodes.includes(order)) {
                    node.classList.remove('unvisited');
                    node.classList.add('visited');
                    document.getElementById(`status-${order}`).textContent = 'Estado: Visitado';
                } else {
                    node.classList.remove('visited');
                    node.classList.add('unvisited');
                    document.getElementById(`status-${order}`).textContent = 'Estado: No visitado';
                }
            });

            updateProgress();
        }

        // Actualizar barra de progreso
        function updateProgress() {
            const tourSteps = document.querySelectorAll('.tour-step');
            tourSteps.forEach(step => {
                const stepNum = parseInt(step.dataset.step);
                step.classList.remove('completed', 'next');
                if (visitedNodes.includes(stepNum)) {
                    step.classList.add('completed');
                } else if (stepNum === currentStep) {
                    step.classList.add('next');
                }
            });

            const instruction = document.querySelector('.tour-instruction');
            if (currentStep <= 5) {
                const nodeNames = ['cráneo', 'región facial', 'dentición', 'foramen magnum', 'mandíbula'];
                instruction.textContent = `Siguiente: Explora el ${nodeNames[currentStep - 1]}`;
            } else {
                instruction.textContent = '¡Tour completado! Has explorado todos los nodos.';
                showNotification('¡Felicitaciones! Has completado el tour del hominido.', 'success');
            }
        }

        // Manejar interacciones con los nodos
        const nodes = document.querySelectorAll('.node');

        nodes.forEach(node => {
            const infoPanel = node.querySelector('.info-panel');
            const order = parseInt(node.dataset.order);

            // Mostrar panel al hacer hover
            node.addEventListener('mouseenter', () => {
                // Ocultar todos los paneles primero
                document.querySelectorAll('.info-panel').forEach(panel => {
                    panel.classList.remove('visible');
                });

                // Posicionar y mostrar el panel actual
                const rect = node.getBoundingClientRect();
                const containerRect = document.querySelector('.model-container').getBoundingClientRect();

                // Calcular posición óptima
                let left = rect.left - containerRect.left;
                let top = rect.top - containerRect.top;

                // Ajustar posición basado en el espacio disponible
                if (left > containerRect.width / 2) {
                    infoPanel.style.right = '120%';
                    infoPanel.style.left = 'auto';
                } else {
                    infoPanel.style.left = '120%';
                    infoPanel.style.right = 'auto';
                }

                infoPanel.classList.add('visible');
            });

            // Ocultar panel al salir del nodo
            node.addEventListener('mouseleave', (e) => {
                const rect = infoPanel.getBoundingClientRect();
                const mouseX = e.clientX;
                const mouseY = e.clientY;

                // Mantener visible si el mouse está sobre el panel
                if (!(mouseX >= rect.left && mouseX <= rect.right &&
                      mouseY >= rect.top && mouseY <= rect.bottom)) {
                    infoPanel.classList.remove('visible');
                }
            });

            // También ocultar al salir del panel
            infoPanel.addEventListener('mouseleave', () => {
                infoPanel.classList.remove('visible');
            });

            // Marcar como visitado al hacer clic
            node.addEventListener('click', () => {
                if (!visitedNodes.includes(order)) {
                    if (order === currentStep) {
                        visitedNodes.push(order);
                        node.classList.remove('unvisited');
                        node.classList.add('visited');
                        document.getElementById(`status-${order}`).textContent = 'Estado: Visitado';
                        currentStep++;
                        localStorage.setItem('homo-sapiens-tour', JSON.stringify(visitedNodes));
                        updateProgress();
                        showNotification(`¡Excelente! Has explorado el ${node.dataset.info}.`, 'success');
                    } else {
                        showNotification(`¡Sigue el orden! Primero explora el nodo ${currentStep}.`, 'info');
                    }
                }
            });
        });

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            const video = document.querySelector('.model-video');
            const nodes = document.querySelectorAll('.node');
            const backgroundVideo = document.querySelector('.background-video');

            // Mostrar nodos cuando el video se pause
            video.addEventListener('pause', () => {
                nodes.forEach(node => {
                    node.classList.remove('hidden');
                });
                updateVisuals();
                showNotification('Da clic a los nodos para comenzar el recorrido.', 'info');
            });

            // Ocultar nodos cuando el video se reproduzca
            video.addEventListener('play', () => {
                nodes.forEach(node => {
                    node.classList.add('hidden');
                });
            });

            // Ambos videos se reproducen automáticamente (background y main model)
            video.addEventListener('loadeddata', () => {
                // No pausar el video principal, dejar que ambos se reproduzcan
            });
        });
    </script>
</body>
</html>
